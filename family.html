<!DOCTYPE html>
<!-- created by Daniel Hadley from twitter bootstrap -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Somerville Systems</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <link href="css/docs.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
    <![endif]-->

    <!-- Highcharts scripts -->
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
      <script src="js/highcharts.js"></script>

    <!-- Leaflet scripts -->
      <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css" />
      <script src="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js"></script>
      <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
      
    <!-- Google Analytics -->

      <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-13225056-2', 'auto');
  ga('send', 'pageview');
      </script>
    
</head>

  <body data-spy="scroll" data-target=".bs-docs-sidebar" data-twttr-rendered="true">

    <!-- Navbar
    ================================================== -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="index.html">Home</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="">
                <a href="index.html">Home</a>
              </li>
              <li class="">
                <a href="live.html">Live</a>
              </li>
              <li class="">
                <a href="work.html">Work</a>
              </li>
              <li class="">
                <a href="play.html">Play</a>
              </li>
              <li class="active">
                <a href="family.html">Raise a Family</a>
              </li>
              <li class="">
                <a href="daily.html">Daily</a>
              <li class="">
                <a href="http://www.somervillema.gov/">City Home</a>
              </li>
              
            </ul>
          </div>
        </div>
      </div>
    </div>

<div class="jumbotron masthead">
  <div class="container">
    <p>The City of Somerville's Key Systems Indicators</p>  
    
  </div>
</div>


<!-- The Charts are all here so that I can style them in a similar way.
They load to the specified containers -->

<script>
    $(function() {
    Highcharts.setOptions({
        chart: {
            backgroundColor: 'rgba(230, 230, 230, .9)',
            borderWidth: 1,
            plotBackgroundColor: 'rgba(255, 255, 255, .9)',
            plotShadow: true,
            plotBorderWidth: 1,
        style: {
            fontFamily: 'Helvetica'
        }
        }
    });
  
<!-- Affordable Housing  -->
   
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'HousingChartContainer',
        type: 'column'
        },
    title: {
                text: 'Affordable Housing Units'
            },
         subtitle: {
                text: 'Source: Commonwealth of Massachusetts & City of Somerville'
            },
        
        xAxis: {
                categories: ['2002', '2003', '2004', '2005', '2006', '2007', '2008', '2009', '2010', '2011', '2012', '2013', '2014']
            },
    yAxis: {
                title: {
                    text: 'Number of Units'
                },
                min: 2000,
        plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
        
    tooltip: {
            pointFormat: '<b>{point.y:,.0f}</b>'
        },
    
    legend: {
        enabled: false
    },

        series: [{
        name: 'Affordable Units',
            data: [2840,2858,2912,2974,3160,3082,3129,3181,3184,3184,3314,3315,3430]
          }]
    });
    
<!-- Birth Rate -->
   
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'BirthsChartContainer',
        type: 'line'
        },
    title: {
                text: 'Birth Rate'
            },
         subtitle: {
                text: 'Source: Massachusetts Department of Public Health'
            },
        
        xAxis: {
                categories: ['1998', '1999', '2000', '2001', '2002', '2003', '2004', '2005', '2006', '2007', '2008', '2009', '2010', '2011', '2012', '2013', '2014']
            },
    yAxis: {
        title: {
                    text: 'Births per 1,000 Residents'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
        tooltip: {
            formatter: function() {
                return this.x + '<br/>' + '<b>' + this.series.name + ': ' + this.y + '</b>';
        }
        },
        
        series: [{
        name: 'Somerville',
            data: [12.2,12.1,12.0,11.3,11.7,11.9,11.0,12.0,11.4,12.8,12.7,13.3,12.4,12.9,12.9,12.7,12.9]
          }, {
        name: 'Massachusetts',
            data: [13.1,12.9,12.8,12.8,12.7,12.6,12.4,11.9,12.1,12.1,11.8,11.4,11.1,11.1,11.0,10.9,11.0]
        }]
    });

<!-- Age Distribution -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'AgeChartContainer',
        type: 'column'
        },
    title: {
                text: 'Age Distribution'
            },
         subtitle: {
                text: 'Source: 2010-2014 American Community Survey'
            },
        
        tooltip: {
            formatter: function() {
                return this.x + '<br/>' + '<b>' + this.series.name + ': ' + this.y + '%' + '</b>';
        }
        },  
        xAxis: {
                categories: ['Under 5 years','5 to 9 years','10 to 14 years','15 to 19 years',
                 '20 to 24 years','25 to 29 years','30 to 34 years','35 to 39 years',
                 '40 to 44 years','45 to 49 years','50 to 54 years','55 to 59 years',
                 '60 to 64 years','65 to 69 years','70 to 74 years','75 to 79 years',
                 '80 to 84 years','85 years and over']
            },
    yAxis: {
                title: {
                    text: 'Percent in Age Group'
                },
                labels: {
            format: '{value}%'
        },
        plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },

        series: [{
        name: 'Somerville',
            data: [5.3,3.3,3.1,4.7,11.6,18.0,13.1,7.8,6.4,4.5,5.3,3.9,3.8,2.7,2,1.4,1.7,1.3]
          }, {
        name: 'Massachusetts',
            data: [5.5,5.7,6.0,7.0,7.3,7.0,6.4,6.0,6.9,7.5,7.6,6.9,5.9,4.4,3.2,2.5,2.0,2.3]
        }]
    });

<!-- Birth Region -->
   
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'BirthRegionChartContainer',
        type: 'pie'
        },
    
    title: {
                text: 'Region of Birth'
            },
         subtitle: {
                text: 'Source: 2010-2014 American Community Survey'
            },
        
    tooltip: {
            pointFormat: '<b>{point.y:,.1f}%</b>'
        },

        series: [{
        name: 'Region',
            data: [
                ['United States',   75.7],
        ['Latin America', 8.6],
        ['Asia',    7.8],
                ['Europe',       5.7],
                ['Africa',     1.7],
        ['North America', 0.5],
                ['Oceania',   0.1],
        ]
    }]
    });

<!-- Language -->
    var chart1 = new Highcharts.Chart({
    chart: {
            renderTo: 'LanguageChartContainer',
        type: 'pie'
        },
    
    title: {
                text: 'Language Spoken at Home'
        },
        subtitle: {
                text: 'Source: 2010-2014 American Community Survey'
            },
        
    tooltip: {
            pointFormat: '<b>{point.y:,.1f}%</b>'
        },

        series: [{
        name: 'Language',
            data: [
        ['English',68.8],
        ['Spanish or Spanish Creole',7.4],
        ['Portuguese or Portuguese Creole',7.0],
        ['Other Indic languages',2.5],
        ['Chinese',2.4],
        ['French Creole',2.1],
        ['French',1.3],
        ['Italian',1.2],
        ['African languages',0.9],
        ['Other Asian languages',0.8],        
        ['Hindi',0.7],
        ['Arabic',0.5],
        ['Greek',0.5],
        ['German',0.4],        
        ['Armenian',0.4],        
        ['Russian',0.4],        
        ['Korean',0.3],        
        ['Japanese',0.3],        
        ['Hebrew',0.3],
        ['Scandinavian languages',0.3],
        ['Vietnamese',0.2],        
        ['Gujarati',0.2],
        ['Urdu',0.2],        
        ['Other Indo-European languages',0.2],        
        ['Tagalog',0.2],        
        ['Persian',0.1],        
        ['Thai',0.1],
        ['Other West Germanic languages',0.1],
        ['Other Slavic languages',0.1],
        ['Polish',0.1],
        ['Hmong', 0.05],
        ['Laotian',0.05],        
        ['Hungarian',0.02],
        ['Serbo-Croatian',0.02],
        ['Navajo',0.01],      
        ]
    }]
    });

<!-- Same-sex couples -->
     var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'SameSexChartContainer',
        type: 'bar'
        },
        
    title: {
            text: 'Cities with the Highest Concentrations of Same-Sex Couple Households, 2012'
        },
            
        subtitle: {
            text: 'Source: American Community Survey'
        },
    
        tooltip: {
            pointFormat: '<b>{point.y:,.1f}%</b>'
        },
    
    legend: {
        enabled: false
    },
    
        xAxis: {
            categories: ["Fort Lauderdale, FL","Seattle, WA","San Francisco, CA","Minneapolis, MN","Portland, ME",
            "Somerville, MA","Oakland, CA","Providence, RI","Washington, DC","Warwick, RI"]
        },
    
        yAxis: {
        min: 1,
        labels: {
                format: '{value}%'
            },
        title: {
                text: 'Same-Sex Couple Households as a Share of all Households'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },

        series: [{
        name: 'Cities',
            data: [2.8,2.6,2.5,2.4,2.2,{
                y: 2.0,
                color: '#263c53'
            },1.9,1.7,1.7,1.6]
        }]
    });

<!-- This is an empty chart- a place holder if we want to use more than one chart but style them in the same way -->
    var chart2 = new Highcharts.Chart({
        chart: {
            renderTo: 'container2',
            type: 'column'
        },

        xAxis: {
            type: 'datetime'
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
            pointStart: Date.UTC(2010, 0, 1),
            pointInterval: 3600 * 1000 // one hour
        }]
    });
});
</script>


<div class="container">

  <div class="marketing">
    
    <div class="row-fluid">
        <h1 class="section header">Housing</h1>
    <p>Somerville's stock of affordable housing units has increased by nearly 600 since 2002. These units represent about 10% of
    the City's housing stock. In SomerVision, residents set a goal of adding 1,200 affordable units between 2010 and 2030.</p>
      <div class="row">
        <div class="span4">
            <div class="tasks-header bg-color dark-blue rounded-top">
                <div class="box-padding narrow-horizontal clearfix">
                    <h4 class="light no-margin">Summary</h4>
                </div>
            </div>
            <div class="bg-color dark-blue columns clearfix">
        <div class="col_50 lines lines-light aligncenter">
                    <h5 class="no-margin normal">Housing Units in the City</h5>
            <h2 class="normal inline">33,720</h2>
        </div>
        <div class="col_50 lines lines-light aligncenter">
                    <h5 class="no-margin normal">Designated Affordable</h5>
            <h2 class="normal inline">3,430</h2>
        </div>
        </div>
            <div class="bg-color greenfade">
        <div class="box-padding aligncenter">
            <h5 class="no-margin normal">SomerVision goal for new housing:</h5>
            <h1 class="no-margin normal">6,000</h1>
            <h5 class="no-margin normal">Permanently Affordable:</h5>
            <h1 class="no-margin normal">1,200 (20%)</h1>
        </div>
        </div>
            <button class="btn btn-large btn-block" type="button"
            onclick="location.href='https://www.somervillebydesign.com/planning/somervision/';">
            More Info</button>
        </div>
        <div class="span8">
            <div id="HousingChartContainer" style="width:100%; height:400px;"></div>
       </div>
        
        </div>
     </div>
    
    </div>

</div>

<!-- Demographics -->
<div class="container">
    <div class="marketing">
      <h1 class="section header">Demographics</h1>

<!-- Births Chart -->
      <p>Births in Somerville are trending upward, increasing from a low of 849 in 2004 (or 11 births per 1,000 residents) to 974 (or 12.9 births per 1,000 residents) a decade later. The oppposite is true statewide, where the birthrate has steadily decreased since 1998. As a result, the Somerville birth rate has consistently exceeded the Massachusetts rate since 2007.</p>
    <div class="row-fluid">
        <div id="BirthsChartContainer" style="width:100%; height:400px;"></div>
    </div>
    
<!-- Age Chart -->
<br></br>
      <p>The proportion of Somerville's population between the ages of 20 and 34 is remarkably large, nearly 43%, which is more than
      double the equivalent proportion statewide. In fact, Somerville has the second largest concentration of 25- to 34-year-olds in the country behind Hoboken, NJ.</p>
    <div class="row-fluid">
        <div id="AgeChartContainer" style="width:100%; height:400px;"></div>
    </div>

<!-- Diversity -->
<br></br>
      <p>Somerville is an incredibly diverse city. A quarter of the population was born outside of the United States, and our
      residents speak 35 languages at home.</p>
    <div class="row-fluid">
    <div class="span6">
        <div id="BirthRegionChartContainer" style="width:100%; height:400px;"></div>
    </div>
    <div class="span6">
        <div id="LanguageChartContainer" style="width:100%; height:400px;"></div>
    </div>
    </div>

<!-- Same Sex Couple Households -->
<br></br>
      <p>There is also diversity in family structure in Somerville: the City has the 6th largest concentration of same-sex couple households in the country.</p>
    <div class="row-fluid">
        <div id="SameSexChartContainer" style="width:100%; height:400px;"></div>
    </div>

    </div>
</div>

<!-- Collision Maps -->

<div class="container">
    <div class="marketing">
      <h1 class="section header">Collision Safety</h1>
      <div class="row">
        <p>Safety on the streets of Somerville is a priority for both the City and its residents. The following maps shows the location of collisions involving pedestrians and cyclists from 2010 through August of 2015. A larger dot, which indicates an intersection with more crashes than others, is usually indicative of more activity at that intersection. The City takes this data seriously, and strives to eliminate as many safety hazards as possible.</p>
          <div class="span6">
              <p><b>Pedestrians</b></p>

              <div id="ped-map" style="height: 400px"></div>
              <script>

                // initialize the map
                var pmap = L.map('ped-map', {scrollWheelZoom:false}).setView([42.3947, -71.10548], 13);

                // load a tile layer
                L.tileLayer('http://tiles.mapc.org/basemap/{z}/{x}/{y}.png',
                  {
                    attribution: 'Tiles by <a href="http://mapc.org">MAPC</a>, Data by <a href="http://mass.gov/mgis">MassGIS</a>',
                    maxZoom: 17,
                    minZoom: 9
                  }).addTo(pmap);

                
                // load GeoJSON from an external file: gis.stackexchange.com/questions/68489/how-to-load-external-geojson-file-into-leaflet-map

                // Function to make popup
                function onEachFeature(feature, layer) {
                      if (feature.properties && feature.properties.Location) {
                          layer.bindPopup(feature.properties.Location);
                      }
                  }

                function getRadiusStyle(x) {
                  area = x * 75;
                  radius = Math.sqrt(area / 3.1416);
                  return radius
                }                

                function ppointToLayer (feature, latlng) {
                    return new L.CircleMarker(latlng, {
                        radius: getRadiusStyle(feature.properties["n"]),
                        fillColor: "#900000",
                        color: "#000",
                        weight: 1,
                        opacity: .75,
                        fillOpacity: 0.75
                      })
                  }

                $.ajax({
                dataType: "json",
                url: "./geo/PedestrianCollisions.geojson",
                success: function (response) {
                      geojsonLayer = L.geoJson(response, {
                        pointToLayer: ppointToLayer,
                        onEachFeature : onEachFeature
                      }).addTo(pmap);
                  }
                }).error(function() {});

              </script>
          </div>
          <div class="span6">
              <p><b>Cyclists</b></p>

              <div id="cyclist-map" style="height: 400px"></div>
              <script>

                // initialize the map
                var cmap = L.map('cyclist-map', {scrollWheelZoom:false}).setView([42.3947, -71.10548], 13);

                // load a tile layer
                L.tileLayer('http://tiles.mapc.org/basemap/{z}/{x}/{y}.png',
                  {
                    attribution: 'Tiles by <a href="http://mapc.org">MAPC</a>, Data by <a href="http://mass.gov/mgis">MassGIS</a>',
                    maxZoom: 17,
                    minZoom: 9
                  }).addTo(cmap);

                
                // load GeoJSON from an external file: gis.stackexchange.com/questions/68489/how-to-load-external-geojson-file-into-leaflet-map

                // Function to make popup
                function onEachFeature(feature, layer) {
                      if (feature.properties && feature.properties.Location) {
                          layer.bindPopup(feature.properties.Location);
                      }
                  }

                function getRadiusStyle(x) {
                  area = x * 75;
                  radius = Math.sqrt(area / 3.1416);
                  return radius
                }            

                function pointToLayer (feature, latlng) {
                    return new L.CircleMarker(latlng, {
                        radius: getRadiusStyle(feature.properties["n"]),
                        fillColor: "#8bbc22",
                        color: "#000",
                        weight: 1,
                        opacity: .75,
                        fillOpacity: 0.75
                      })
                  }

                $.ajax({
                dataType: "json",
                url: "./geo/CyclistCollisions.geojson",
                success: function (response) {
                      geojsonLayer = L.geoJson(response, {
                        pointToLayer: pointToLayer,
                        onEachFeature : onEachFeature
                      }).addTo(cmap);
                  }
                }).error(function() {});

              </script>
          </div>
      </div>
    </div>
    
</div>




    <!-- Footer
    ================================================== -->
    <footer class="footer">
      <div class="container">
        <p>Somerville Systems : Daniel Hadley, Emily Monea, & Skye Stewart | <a href="https://github.com/DanielHadley/SomervilleSystems">Code.</a> </p>
<p><a href="mailto:dhadley@somervillema.gov">Contact us</a> with questions, requests, and suggestions.</p>

<br>
<img src="./img/somervilleSeal.png" alt="Kippt">
       
        
        
      

</div>
    </footer>



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/bootstrap.js"></script>
    

  

</body></html>
