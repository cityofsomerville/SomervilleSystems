<!DOCTYPE html>
<!-- created by Daniel Hadley from twitter bootstrap -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Somerville Systems</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <link href="css/docs.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
    <![endif]-->

    <!-- Highcharts scripts -->
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
      <script src="js/highcharts.js"></script>

    <!-- Leaflet scripts -->
      <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css" />
      <script src="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js"></script>
      <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
      
    <!-- Google Analytics -->

      <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-13225056-2', 'auto');
  ga('send', 'pageview');
	  </script>
    
</head>

  <body data-spy="scroll" data-target=".bs-docs-sidebar" data-twttr-rendered="true">

    <!-- Navbar
    ================================================== -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="index.html">Home</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="">
                <a href="index.html">Home</a>
              </li>
              <li class="">
                <a href="live.html">Live</a>
              </li>
              <li class="active">
                <a href="work.html">Work</a>
              </li>
              <li class="">
                <a href="play.html">Play</a>
              </li>
              <li class="">
                <a href="family.html">Raise a Family</a>
              </li>
              <li class="">
                <a href="daily.html">Daily</a>
              <li class="">
                <a href="http://www.somervillema.gov/">City Home</a>
              </li>
              
            </ul>
          </div>
        </div>
      </div>
    </div>

<div class="jumbotron masthead">
  <div class="container">
    <p>The City of Somerville's Key Systems Indicators</p>  
    
  </div>
</div>


<!-- The Charts are all here so that I can style them in a similar way.
They load to the specified containers -->

<script>
    $(function() {
    Highcharts.setOptions({
        chart: {
            backgroundColor: 'rgba(230, 230, 230, .9)',
            borderWidth: 1,
            plotBackgroundColor: 'rgba(255, 255, 255, .9)',
            plotShadow: true,
            plotBorderWidth: 1,
	    style: {
            fontFamily: 'Helvetica'
	    },
        },
	lang: {
	    numericSymbols: [' thousand', ' million', ' billion']
	}
    });
  
<!-- Unemployment -->
   
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'UnemploymentChartContainer',
	    type: 'line'
        },
	title: {
                text: 'Unemployment Rate'
            },
	     subtitle: {
                text: 'Source: bls.gov'
            },
	    
        tooltip: {
            formatter: function() {
                return this.x + '<br/>' + '<b>' + this.series.name + ': ' + this.y + '%' + '</b>';
	    }
        },
	    
        xAxis: {
                categories: ['2000', '2001', '2002', '2003', '2004', '2005',
			     '2006', '2007', '2008', '2009', '2010', '2011', '2012', '2013', '2014','2015','2016']
            },
	yAxis: {
                title: {
                    text: 'Unemployment Rate'
                },
                labels: {
		    format: '{value}%'
		},
		plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },

        series: [{
	    name: 'Somerville',
            data: [2,3,4.5,4.8,4,3.5,3.5,3.2,3.9,6.1,6.1,5.1,4.5,4.7,3.8,3.5,2.1]
	      }, {
	    name: 'Massachusetts',
            data: [2.7,3.7,5.3,5.8,5.2,4.8,4.8,4.5,5.4,8.2,8.3,7.3,6.7,6.7,5.8,4.9,2.8]
	      }, {
	    name: 'U.S.',
            data: [4,4.7,5.8,6,5.5,5.1,4.6,4.6,5.8,9.3,9.6,8.9,8.1,7.4,6.2,5.3,5.1]
        }]
    });
    
<!-- Wages -->
   
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'WagesChartContainer',
	    type: 'line'
        },
	title: {
                text: 'Average Weekly Wages in Somerville'
            },
	     subtitle: {
                text: 'Source: Executive Office of Labor and Workforce Development'
            },
	    
	tooltip: {
            pointFormat: '<b>${point.y:,.0f}</b>'
	    },
	    
        xAxis: {
                categories: ['2003', '2004', '2005', '2006', '2007', '2008', '2009', '2010', '2011', '2012', '2013', '2014','2015','2016']
            },
	yAxis: {
                title: {
                    text: 'Average Weekly Wages'
                },
                labels: {
		    format: '${value}'
		},
		plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },

	legend: {
	    enabled: false
	},
	
        series: [{
	    name: 'Weekly Wages',
            data: [703, 719, 758, 788, 837, 844, 850, 790, 802, 845, 862, 867, 901, 919]
	      }]
    });
    
<!-- Jobs -->
   
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'JobsChartContainer',
	    type: 'line'
        },
	title: {
                text: 'Jobs in Somerville'
            },
	     subtitle: {
                text: 'Source: Executive Office of Labor and Workforce Development'
            },
	tooltip: {
            pointFormat: '<b>{point.y:,.0f}'
	    },	    
	    
        xAxis: {
                categories: ['2003', '2004', '2005', '2006', '2007', '2008', '2009', '2010', '2011', '2012', '2013', '2014','2015','2016']
            },
	yAxis: {
                title: {
                    text: 'Average Monthly Employment'
                },
                labels: {format: '{value}'
            },
		plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },

	legend: {
	    enabled: false
	},
	
        series: [{
	    name: 'Jobs',
            data: [21898, 21411,21038,21102,21451,21856,21082,21275,22454,23033,23407,25153,26188,26381]
	      }]
    });
 
 <!-- Commercial Property Value -->
   
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'PropertyValueContainer',
	    type: 'column'
        },
	title: {
                text: 'Residential and Commercial Property Value'
            },
	     subtitle: {
                text: 'Source: City of Somerville'
            },
	xAxis: {
                title: {
		    text: 'Fiscal Year'
		},
		categories: ['1996', '1997', '1998', '1999', '2000', '2001', '2002', '2003', '2004', '2005', '2006', '2007',
			     '2008', '2009', '2010', '2011', '2012', '2013', '2014', '2015','2016','2017']
            },
	yAxis: {
                min: 0,
		title: {
                    text: 'Property Value ($)'
                },
		plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },   
	plotOptions: {
            column: {
                stacking: 'normal'
                }
            },
	tooltip: {
            pointFormat: '<b>${point.y:,.0f}</b>'
        },
	legend: {
	    enabled: true,
	    reversed: true
	},
	series: [{
	    name: 'Commercial',
	    data: [621333281,677321785,710504110,821589645,930173140,997464473,1158227198,887935750,900926278,973447611,1022198148,1228148835,1248700880,1231085973,1243422590,1270163365,1291505078,1302088548,1551345051,1583038416,1651781184,1846316098]
	},{
	    name: 'Residential',
            data: [2155918524,2414608127,2445616947,2651239012,2937428052,2975444502,3337867183,4786203050,5712928622,6282436389,6872700152,7523926865,7343629210,7178108247,7017857230,7027712955,7099067112,7293246502,7894327349,8909186864,9546993086,10814213402]
            	}]
    });

<!-- Commuting1 -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'Commute1ChartContainer',
	    type: 'column'
        },

	title: {
                text: 'Commuting Methods'
            },
	     subtitle: {
                text: 'Source: 2015 American Community Survey'
        },
	    
        tooltip: {
            formatter: function() {
                return this.x + '<br/>' + '<b>' + this.series.name + ': ' + this.y + '%' + '</b>';
	    }
        },
	    
        xAxis: {
                categories: ['Drove alone','Carpooled','Public transportation','Walked', 'Bicycle', 'Other means','Worked at home']
        },

	yAxis: {
                max: 80,
		title: {
                    text: 'Percent of All Commuters'
                },
                labels: {
		    format: '{value}%'
		},
		plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
        },

        series: [{
	    name: 'Somerville',
            data: [43, 8.6, 29.1, 11.3,	3.7, 0.9, 3.4]
	      }, {
	    name: 'Massachusetts',
            data: [72.3, 8, 9.2, 4.8, 0.7, 0.8, 4.3]
	       }, {
	    name: 'U.S.',
            data: [76.4, 9.7, 5, 2.8, 0.6, 1.2, 4.3]
        }]
    });

<!-- Commuting2 -->
     var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'Commute2ChartContainer',
	    type: 'bar'
        },
        
	title: {
            text: 'Cities with Highest Concentrations of Transit Commuters, 2012'
        },
            
        subtitle: {
            text: 'Source: 2010-2012 American Community Survey'
        },
	
        tooltip: {
            pointFormat: '<b>{point.y:,.1f}%</b>'
        },
	
	legend: {
	    enabled: false
	},
	
        xAxis: {
            categories: ["New York, NY", "Hoboken, NJ", "Jersey City, NJ", "West New York, NJ", "Union City, NJ", "Washington, DC",
			 "Boston, MA", "San Francisco, CA", "Atlantic City, NJ", "Somerville, MA"]
        },
	
        yAxis: {
	    min: 0,
	    
	    labels: {
                format: '{value}%'
            },
	    
	    title: {
                text: 'Percent of All Commuters who Take Public Transportation'
            },
            
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },

        series: [{
	    name: 'Cities',
            data: [56, 55.8, 46.7, 41.6, 40.5, 38.7, 33.3, 33, 30.3, {
                y: 29.1,
                color: '#263c53'
            }]
        }]
    });    


    
<!-- Commuting3 -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'Commute3ChartContainer',
	    type: 'column'
        },
	title: {
                text: 'Percent of Residents with Jobs who Work Outside Community of Residence'
            },
	     subtitle: {
                text: 'Source: 2010-2012 American Community Survey'
            },
	    
        tooltip: {
            pointFormat: '<b>{point.y:,.1f}%</b>'
        },
	    
        xAxis: {
                categories: ['Arlington','Boston','Cambridge','Everett', 'Medford','Somerville', 'MA', 'U.S.']
            },
	yAxis: {
                title: {
                    text: 'Percent of All Workers 16 and Older'
                },
                labels: {
		    format: '{value}%'
		},
		plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
	legend: {
	    enabled: false
	},
	
        series: [{
	    name: 'Percent of workers',
            data: [84.3, 32.1, 55, 86.2, 83.6, {
                y: 81.7,
                color: '#263c53'
            }, 46, 42.9]
	      }]
    });

<!-- Commuting4 -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'Commute4ChartContainer',
	    type: 'column'
        },
	title: {
                text: 'Average Commute'
            },
	     subtitle: {
                text: 'Source: 2010-2012 American Community Survey'
            },
	    
        tooltip: {
            pointFormat: '<b>{point.y:,.1f}</b>'
        },
	    
        xAxis: {
                categories: ['Arlington','Boston','Cambridge','Everett', 'Medford','Somerville', 'MA', 'U.S.']
            },
	yAxis: {
                title: {
                    text: 'Minutes'
                },
		plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },

	legend: {
	    enabled: false
	},
	
        series: [{
	    name: 'Commute - minutes',
            data: [30.0, 29.1, 25.3, 32.7, 28.9, {
                y: 29.7,
                color: '#263c53'
            }, 28.7, 25.9]
	}]
    });

<!-- Educational attainment -->
    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'EdAttainChartContainer',
	    type: 'column'
        },

	title: {
                text: 'Educational Attainment'
            },
	     subtitle: {
                text: 'Source: 2014 American Community Survey 1-Year Estimates'
        },
	    
        tooltip: {
            formatter: function() {
                return this.x + '<br/>' + '<b>' + this.series.name + ': ' + this.y + '%' + '</b>';
	    }
        },
	    
        xAxis: {
                categories: ["Less than 9th Grade", "9th to 12 Grade, No Diploma", "High School Graduate", "Some College", "Associate's Degree", "Bachelor's Degree", "Graduate or Professional Degree"]
        },

	yAxis: {
		title: {
                    text: 'Percent of Residents Ages 25+'
                },
                labels: {
		    format: '{value}%'
		},
		plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
        },

        series: [{
	    name: 'Somerville',
            data: [5.3, 5.4, 18.3, 9.8, 3.9, 29.3, 28.0]
	      }, {
	    name: 'Massachusetts',
            data: [4.8, 5.4, 25.4, 16.2, 7.7, 22.8, 17.7]
	       }, {
	    name: 'U.S.',
            data: [5.7, 7.6, 27.8, 21.1, 8.1, 18.5, 11.2]
        }]
    });

<!-- This is an empty chart- a place holder if we want to use more than one chart but style them in the same way -->
    var chart2 = new Highcharts.Chart({
        chart: {
            renderTo: 'container2',
            type: 'column'
        },

        xAxis: {
            type: 'datetime'
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
            pointStart: Date.UTC(2010, 0, 1),
            pointInterval: 3600 * 1000 // one hour
        }]
    });
});
</script>

<!-- Property Value -->
<div class="container">
    <div class="marketing">
    	<div class="row-fluid">
    	  <h1 class="section header">Economic Growth</h1>
    	  <p>Commercial property value increased by 2% between FY2014 and FY2015, and residential property value grew by nearly 13%. Commercial properties account for over 15% of all property value in the city. </p>
    	    <div id="PropertyValueContainer" style="width:100%; height:400px;"></div>
    	</div>
    </div>
</div>

<!-- Employment -->
<div class="container">
    <div class="marketing">
	<div class="row-fluid">
	  <h1 class="section header">Employment</h1>
	  <p>Somerville's unemployment rate is consistently below the Massachusetts and national rates, and the spread has increased
	  over time. The number of jobs in Somerville has more than recovered after falling during the recession. Weekly wages are
	  also on the rise.</p>
	    <div id="UnemploymentChartContainer" style="width:100%; height:400px;"></div>
	</div>

<br></br>
    
	<div class="row-fluid">
	    <div class="span6">
		<div id="JobsChartContainer" style="width:100%; height:400px;"></div>
	    </div>
	    <div class="span6">
		<div id="WagesChartContainer" style="width:100%; height:400px;"></div>
	    </div>
	</div>
    </div>
</div>

<!-- Employment -->
<div class="container">
    <div class="marketing">
	<div class="row-fluid">
	  <h1 class="section header">Education</h1>
	  <p>Somerville residents have high levels of educational attainment compared to their counterparts in Massachusetts and the U.S. Indeed, a remarkable 60 percent have a college degree or more. </p>
	    <div id="EdAttainChartContainer" style="width:100%; height:400px;"></div>
	</div>
    </div>
</div>

<!-- Commuting -->
<div class="container">
    <div class="marketing">

	<div class="row-fluid">
	  <h1 class="section header">Commuting</h1>
	  <p>Over 80 percent of Somerville residents with jobs do not work in Somerville, a much higher proportion than
	  in Cambridge, Boston, Massachusetts, or the U.S. Nonetheless, Somerville commuters spend approximately the same time
	  traveling to work as their counterparts in Somerville's neighboring communities as well as the state and country as a whole.</p>
	</div>
	
	<div class="row-fluid"> 
	    <div class="span6">
		<div id="Commute3ChartContainer" style="width:100%; height:400px;"></div>
	    </div>
	    <div class="span6">
		<div id="Commute4ChartContainer" style="width:100%; height:400px;"></div>
	    </div>
	</div>

          <br></br>

    <div class="row">
        <div class="span12">
            <p>This map shows the condition of Somerville's streets as of 2014, the most recent period for which reliable data is available. Despite dwindling funding from the State, the City is committed to maintaining its infrastructure. <FONT COLOR="#253494">Dark blue</FONT> means higher PCI, or 'Pavement Condition Index,' a score from 0 to 100, and <FONT COLOR="#a1dab4">light blue</FONT> / <FONT COLOR="#ffffcc">yellow</FONT> means lower</p>

            <div id="map" style="height: 400px"></div>
            <script>

                // initialize the map
              var map = L.map('map', {scrollWheelZoom:false}).setView([42.3947, -71.10548], 13);

              // load a tile layer
              L.tileLayer('http://tiles.mapc.org/basemap/{z}/{x}/{y}.png',
                {
                  attribution: 'Tiles by <a href="http://mapc.org">MAPC</a>, Data by <a href="http://mass.gov/mgis">MassGIS</a>',
                  maxZoom: 17,
                  minZoom: 9
                }).addTo(map);

              
              // load GeoJSON from an external file: gis.stackexchange.com/questions/68489/how-to-load-external-geojson-file-into-leaflet-map

              // Function to make popup
              function onEachFeature(feature, layer) {
                popupOptions = {maxWidth: 200};
                layer.bindPopup("<b>PCI:</b> " + feature.properties.OCI +
                  "<br><b>Street Name: </b>" + feature.properties.STREETNAME,
                  popupOptions);
              }

              // styling
              // styling
              function getValue(x) {
                return x > 100 ? "#808080" :
                       x >= 80 ? "#253494" :
                       x >= 60 ? "#2c7fb8" :
                       x >= 40 ? "#41b6c4" :
                       x >= 20 ? "#a1dab4" :
                       x >= 0 ? "#ffffcc" :
                       "#808080";
              }

              function getWidthStyle(x) {
                return x * .1;
              }   

              function style1(feature) {
                return {
                    "color": getValue(feature.properties["OCI"]),
                    "opacity": .65, 
                    "weight": getWidthStyle(feature.properties["PavementWi"])
                };
              }

              $.ajax({
              dataType: "json",
              url: "./geo/PavementConditionMap.geojson",
              success: function (response) {
                    geojsonLayer = L.geoJson(response, {
                        style: style1,
                        onEachFeature: onEachFeature
                    }).addTo(map);
                }
              }).error(function() {});
            </script>

        </div>
    </div>

        <br></br>

	<div class="row-fluid">
	  <p>Somerville commuters are far less likely to drive and far more likely to walk, bike, or take public transportation than their
	  counterparts in Massachusetts and the U.S. In fact, Somerville has the 10th highest concentration of transit commuters among municipalities in the U.S.</p>
	    <div id="Commute1ChartContainer" style="width:100%; height:400px;"></div>
	</div>

<br></br>

	<div class="row-fluid">
	    <div id="Commute2ChartContainer" style="width:100%; height:400px;"></div>
	</div>

    </div>
</div>

    <!-- Footer
    ================================================== -->
    <footer class="footer">
      <div class="container">
        <p>Somerville Systems : Daniel Hadley, Emily Monea, & Skye Stewart | <a href="https://github.com/DanielHadley/SomervilleSystems">Code.</a> </p>
<p><a href="mailto:dhadley@somervillema.gov">Contact us</a> with questions, requests, and suggestions.</p>

<br>
<img src="./img/somervilleSeal.png" alt="Kippt">
       
        
        
      

</div>
    </footer>



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/bootstrap.js"></script>
    

  

</body></html>
